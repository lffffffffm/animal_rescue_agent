from __future__ import annotations


def emergency_rescue_template(query: str) -> str:
    """当外部依赖（LLM/向量库）不可用时的兜底回答，保证系统不 500。"""
    return (
        "我目前无法连接到知识库或大模型服务，因此先给你一份通用的流浪动物应急救助流程。\n\n"
        f"你的问题：{query}\n\n"
        "1）先确保人身安全：避免被抓咬，必要时戴手套/用毛巾包裹。\n"
        "2）快速判断紧急程度：\n"
        "   - 大量出血、呼吸困难、抽搐、无法站立 → 立即送医。\n"
        "   - 精神差、体温低、持续呕吐/腹泻 → 尽快联系救助组织或医院。\n"
        "3）临时安置：纸箱/航空箱 + 保暖（毛巾、热水袋外包布），保持安静。\n"
        "4）不要强行喂食：尤其是幼猫/虚弱动物，避免呛咳；可少量提供清水。\n"
        "5）尽快就医或联系救助：优先附近宠物医院/动物医院，其次联系本地救助站。\n\n"
        "如果你愿意，补充以下信息我可以给更精确的建议：\n"
        "- 动物类型/大概年龄（幼猫/成猫）\n"
        "- 具体症状（流口水/跛行/出血/呼吸等）\n"
        "- 是否能接近、是否攻击\n"
        "- 你所在位置（开启地图后可推荐附近医院）"
    )
